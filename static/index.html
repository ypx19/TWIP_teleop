<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>TWIP 仿真器网页版</title>
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
<div class="container">
    <header>
        <h1>TWIP 平衡车仿真器</h1>
        <p>网页版实时仿真与遥控</p>
    </header>
    <main class="main-content">
        <section class="simulator">
            <h2>仿真画面</h2>
            <img id="sim-img" src="" width="640" height="480" alt="仿真画面"/>
            <div id="sim-status">
                <p>左摇杆: <span id="stick">(0.00, 0.00)</span></p>
                <p>电机: <span id="motor">L=0.00, R=0.00</span></p>
                <p>轮子角度: <span id="angle">L=0.00, R=0.00</span></p>
                <p>轮子角速度: <span id="vel">L=0.00, R=0.00</span></p>
                <p>仿真速度: <span id="speed">1/10.0</span></p>
                <p>车身位置: <span id="pos">x=0.00</span></p>
                <p>车身速度: <span id="v">v=0.00</span></p>
                <p>倾斜角度: <span id="theta">θ=0.00</span></p>
            </div>
        </section>
        <section class="controls">
            <h2>遥控与数据</h2>
            <div>
                <button id="btn-record">开始记录</button>
                <button id="btn-stop" disabled>停止记录</button>
                <span id="record-status">未记录</span>
            </div>
            <div>
                <button id="btn-pause">暂停仿真</button>
                <label>仿真速度: <input type="range" id="sim-speed" min="1" max="20" value="20"></label>
                <span id="sim-speed-label">最快</span>
            </div>
            <div>
                <button id="btn-up">↑</button>
                <button id="btn-left">←</button>
                <button id="btn-down">↓</button>
                <button id="btn-right">→</button>
            </div>
            <hr>
            <div id="data-manager">
                <h3>数据管理</h3>
                <div>
                    <label>记录数据：</label>
                    <select id="data-list" size="3" style="min-width:200px;"></select>
                    <button id="btn-play" disabled>回放</button>
                </div>
                <div style="margin:10px 0;">
                    <label>时间轴预览：</label>
                    <div id="timeline-container" style="position:relative;width:100%;height:40px;background:#eee;margin-top:20px;">
                        <div id="timeline-cursor" style="position:absolute;top:0;width:2px;height:100%;background:#007bff;"></div>
                        <div id="timeline-time" style="position:absolute;top:0;left:0;background:#fff;padding:2px 8px;border-radius:4px;box-shadow:0 0 2px #aaa;"></div>
                        <!-- 新增两个可拖拽的区间头指针 -->
                        <div id="trim-start-pointer" style="position:absolute;top:0;width:8px;height:100%;background:#28a745;cursor:ew-resize;border-radius:4px;"></div>
                        <div id="trim-end-pointer" style="position:absolute;top:0;width:8px;height:100%;background:#dc3545;cursor:ew-resize;border-radius:4px;"></div>
                    </div>
                </div>
                <div>
                    <button id="btn-trim">裁剪</button>
                    <button id="btn-export">导出</button>
                </div>
                <div style="margin-top:10px;">
                    <label><input type="checkbox" id="export-pos" checked> 位置</label>
                    <label><input type="checkbox" id="export-vel" checked> 速度</label>
                    <label><input type="checkbox" id="export-angle" checked> 倾斜角</label>
                    <label><input type="checkbox" id="export-motor" checked> 电机</label>
                    <label><input type="checkbox" id="export-wheel" checked> 轮子</label>
                </div>
            </div>
        </section>
    </main>
</div>
<script src="https://cdn.jsdelivr.net/npm/socket.io-client@3/dist/socket.io.min.js"></script>
<script src="static/js/main.js"></script>
</body>
</html>